---
- name: Installation
  hosts: '{{ target }}'
  vars:
      user: admin
      add_user: true
      disallow_root_login: false
      execute_firewall: false
      manala_motd_template: "{{ playbook_dir ~ '/templates/motd.j2' }}"

  roles:
      - motd
      - iptables
      - fail2ban
      - { role: user, when: add_user == true }
      - { role: docker, when docker.stat.exists == false }
      - dokku

  tasks:
      - name: Package installation
        apt: name={{ item }} update_cache=yes state=latest
        with_items:
            - git
            - htop
            - vim
            - ncdu
            - silversearcher-ag
            - zip
            - unzip
            - locate
            - make
            - cmake
            - telnet
            - sudo
            - zsh
            - wget
            - curl
            - tmux
            - nmap
            - apt-file
            - lynis
...
